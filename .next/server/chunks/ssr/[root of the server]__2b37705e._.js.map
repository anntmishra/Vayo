{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///Users/anantmishra/Documents/GitHub/Vayo/app/create-account/page.tsx"],"sourcesContent":["'use client';\nimport Link from 'next/link';\nimport { useState, FormEvent, ChangeEvent } from 'react';\nimport { useRouter } from 'next/navigation';\n\ninterface FormData {\n  company: string;\n  email: string;\n  password: string;\n  phone: string;\n  truckCount: string;\n}\n\ninterface FormErrors {\n  company?: string;\n  email?: string;\n  password?: string;\n  phone?: string;\n  truckCount?: string;\n  submit?: string;\n}\n\nexport default function CreateAccount() {\n  const router = useRouter();\n  const [formData, setFormData] = useState<FormData>({\n    company: '',\n    email: '',\n    password: '',\n    phone: '',\n    truckCount: ''\n  });\n  const [errors, setErrors] = useState<FormErrors>({});\n  const [isLoading, setIsLoading] = useState(false);\n\n  const validateForm = () => {\n    const newErrors: FormErrors = {};\n    if (!formData.company) newErrors.company = 'Company name is required';\n    if (!formData.email) newErrors.email = 'Email is required';\n    else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) newErrors.email = 'Email is invalid';\n    if (!formData.password) newErrors.password = 'Password is required';\n    else if (formData.password.length < 6) newErrors.password = 'Password must be at least 6 characters';\n    if (!formData.phone) newErrors.phone = 'Phone number is required';\n    if (!formData.truckCount) newErrors.truckCount = 'Number of trucks is required';\n    else if (parseInt(formData.truckCount) < 0) newErrors.truckCount = 'Invalid number of trucks';\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    if (validateForm()) {\n      setIsLoading(true);\n      try {\n        const formPayload = {\n          company: formData.company.trim(),\n          email: formData.email.trim().toLowerCase(),\n          password: formData.password,\n          phone: formData.phone.trim(),\n          truckCount: formData.truckCount\n        };\n\n        console.log('Submitting form data:', formPayload);\n\n        const response = await fetch('/api/auth/register', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify(formPayload),\n        });\n\n        const data = await response.json().catch(e => {\n          console.error('Error parsing response:', e);\n          throw new Error('Failed to parse server response');\n        });\n\n        console.log('Server response:', data);\n\n        if (!response.ok) {\n          throw new Error(data.error || 'Failed to create account');\n        }\n\n        // Registration successful\n        router.push('/configure-fleet');\n      } catch (error) {\n        console.error('Registration error:', error);\n        setErrors(prev => ({\n          ...prev,\n          submit: error instanceof Error ? error.message : 'Failed to create account'\n        }));\n      } finally {\n        setIsLoading(false);\n      }\n    }\n  };\n\n  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const { name, value } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: value\n    }));\n    // Clear error when user starts typing\n    if (errors[name as keyof FormErrors]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: undefined\n      }));\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-white to-gray-50\">\n      <div className=\"container-custom py-16\">\n        <div className=\"max-w-md mx-auto\">\n          <Link href=\"/get-started\" className=\"text-primary hover:text-primary-dark inline-flex items-center mb-6\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-5 h-5 mr-2\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18\" />\n            </svg>\n            Back to Get Started\n          </Link>\n\n          <div className=\"bg-white p-8 rounded-xl shadow-sm border border-gray-100\">\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-6\">Create Your Account</h1>\n            \n            {errors.submit && (\n              <div className=\"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-600\">\n                {errors.submit}\n              </div>\n            )}\n\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div>\n                <label htmlFor=\"company\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Company Name <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"text\"\n                  id=\"company\"\n                  name=\"company\"\n                  value={formData.company}\n                  onChange={handleChange}\n                  className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary ${\n                    errors.company ? 'border-red-500' : 'border-gray-300'\n                  }`}\n                  placeholder=\"Enter your company name\"\n                  disabled={isLoading}\n                />\n                {errors.company && <p className=\"text-red-500 text-sm mt-1\">{errors.company}</p>}\n              </div>\n\n              <div>\n                <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Email Address <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"email\"\n                  id=\"email\"\n                  name=\"email\"\n                  value={formData.email}\n                  onChange={handleChange}\n                  className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary ${\n                    errors.email ? 'border-red-500' : 'border-gray-300'\n                  }`}\n                  placeholder=\"Enter your email\"\n                  disabled={isLoading}\n                />\n                {errors.email && <p className=\"text-red-500 text-sm mt-1\">{errors.email}</p>}\n              </div>\n\n              <div>\n                <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Password <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"password\"\n                  id=\"password\"\n                  name=\"password\"\n                  value={formData.password}\n                  onChange={handleChange}\n                  className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary ${\n                    errors.password ? 'border-red-500' : 'border-gray-300'\n                  }`}\n                  placeholder=\"Create a password\"\n                  disabled={isLoading}\n                />\n                {errors.password && <p className=\"text-red-500 text-sm mt-1\">{errors.password}</p>}\n              </div>\n\n              <div>\n                <label htmlFor=\"phone\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Phone Number <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"tel\"\n                  id=\"phone\"\n                  name=\"phone\"\n                  value={formData.phone}\n                  onChange={handleChange}\n                  className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary ${\n                    errors.phone ? 'border-red-500' : 'border-gray-300'\n                  }`}\n                  placeholder=\"Enter your phone number\"\n                  disabled={isLoading}\n                />\n                {errors.phone && <p className=\"text-red-500 text-sm mt-1\">{errors.phone}</p>}\n              </div>\n\n              <div>\n                <label htmlFor=\"truckCount\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Number of Trucks <span className=\"text-red-500\">*</span>\n                </label>\n                <input\n                  type=\"number\"\n                  id=\"truckCount\"\n                  name=\"truckCount\"\n                  value={formData.truckCount}\n                  onChange={handleChange}\n                  min=\"0\"\n                  className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary ${\n                    errors.truckCount ? 'border-red-500' : 'border-gray-300'\n                  }`}\n                  placeholder=\"Enter number of trucks\"\n                  disabled={isLoading}\n                />\n                {errors.truckCount && <p className=\"text-red-500 text-sm mt-1\">{errors.truckCount}</p>}\n                <p className=\"text-sm text-gray-500 mt-1\">Free for up to 5 trucks</p>\n              </div>\n\n              <button \n                type=\"submit\"\n                className={`w-full btn-primary text-center mt-6 ${isLoading ? 'opacity-50 cursor-not-allowed' : ''}`}\n                disabled={isLoading}\n              >\n                {isLoading ? 'Creating Account...' : 'Create Account & Continue'}\n              </button>\n            </form>\n\n            <p className=\"mt-4 text-sm text-center text-gray-600\">\n              Already have an account?{' '}\n              <Link href=\"/login\" className=\"text-primary hover:text-primary-dark\">\n                Sign in\n              </Link>\n            </p>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n} "],"names":[],"mappings":"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","debugId":null}}]
}