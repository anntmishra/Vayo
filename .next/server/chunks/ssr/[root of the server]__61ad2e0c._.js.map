{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 39, "column": 0}, "map": {"version":3,"sources":["file:///Users/anantmishra/Desktop/Misc/Vayo/vayo-app/app/login/page.tsx"],"sourcesContent":["'use client';\nimport Link from 'next/link';\nimport { useState, FormEvent, ChangeEvent } from 'react';\nimport { useRouter } from 'next/navigation';\n\ninterface FormData {\n  email: string;\n  password: string;\n  rememberMe: boolean;\n}\n\ninterface FormErrors {\n  email?: string;\n  password?: string;\n  submit?: string;\n}\n\nexport default function Login() {\n  const router = useRouter();\n  const [formData, setFormData] = useState<FormData>({\n    email: '',\n    password: '',\n    rememberMe: false\n  });\n  const [errors, setErrors] = useState<FormErrors>({});\n  const [isLoading, setIsLoading] = useState(false);\n\n  const validateForm = () => {\n    const newErrors: FormErrors = {};\n    if (!formData.email) newErrors.email = 'Email is required';\n    else if (!/\\S+@\\S+\\.\\S+/.test(formData.email)) newErrors.email = 'Email is invalid';\n    if (!formData.password) newErrors.password = 'Password is required';\n\n    setErrors(newErrors);\n    return Object.keys(newErrors).length === 0;\n  };\n\n  const handleSubmit = async (e: FormEvent<HTMLFormElement>) => {\n    e.preventDefault();\n    if (validateForm()) {\n      setIsLoading(true);\n      try {\n        const response = await fetch('/api/auth/login', {\n          method: 'POST',\n          headers: {\n            'Content-Type': 'application/json',\n          },\n          body: JSON.stringify({\n            email: formData.email.trim().toLowerCase(),\n            password: formData.password,\n          }),\n        });\n\n        const data = await response.json();\n\n        if (!response.ok) {\n          throw new Error(data.error || 'Invalid credentials');\n        }\n\n        // Login successful - redirect based on user role\n        if (data.user.role === 'driver') {\n          router.push('/driver-dashboard');\n        } else {\n          router.push('/owner-dashboard');\n        }\n      } catch (error) {\n        setErrors(prev => ({\n          ...prev,\n          submit: error instanceof Error ? error.message : 'Failed to sign in'\n        }));\n      } finally {\n        setIsLoading(false);\n      }\n    }\n  };\n\n  const handleChange = (e: ChangeEvent<HTMLInputElement>) => {\n    const { name, value, type, checked } = e.target;\n    setFormData(prev => ({\n      ...prev,\n      [name]: type === 'checkbox' ? checked : value\n    }));\n    // Clear error when user starts typing\n    if (errors[name as keyof FormErrors]) {\n      setErrors(prev => ({\n        ...prev,\n        [name]: undefined\n      }));\n    }\n  };\n\n  return (\n    <div className=\"min-h-screen bg-gradient-to-b from-white to-gray-50\">\n      <div className=\"container-custom py-16\">\n        <div className=\"max-w-md mx-auto\">\n          <Link href=\"/\" className=\"text-primary hover:text-primary-dark inline-flex items-center mb-6\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" fill=\"none\" viewBox=\"0 0 24 24\" strokeWidth={1.5} stroke=\"currentColor\" className=\"w-5 h-5 mr-2\">\n              <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M10.5 19.5L3 12m0 0l7.5-7.5M3 12h18\" />\n            </svg>\n            Back to Home\n          </Link>\n\n          <div className=\"bg-white p-8 rounded-xl shadow-sm border border-gray-100\">\n            <h1 className=\"text-2xl font-bold text-gray-900 mb-6\">Sign In to Vayo</h1>\n            \n            {errors.submit && (\n              <div className=\"mb-4 p-4 bg-red-50 border border-red-200 rounded-lg text-red-600\">\n                {errors.submit}\n              </div>\n            )}\n\n            <form onSubmit={handleSubmit} className=\"space-y-4\">\n              <div>\n                <label htmlFor=\"email\" className=\"block text-sm font-medium text-gray-700 mb-1\">\n                  Email Address\n                </label>\n                <input\n                  type=\"email\"\n                  id=\"email\"\n                  name=\"email\"\n                  value={formData.email}\n                  onChange={handleChange}\n                  className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary ${\n                    errors.email ? 'border-red-500' : 'border-gray-300'\n                  }`}\n                  placeholder=\"Enter your email\"\n                  disabled={isLoading}\n                />\n                {errors.email && <p className=\"text-red-500 text-sm mt-1\">{errors.email}</p>}\n              </div>\n\n              <div>\n                <div className=\"flex justify-between items-center mb-1\">\n                  <label htmlFor=\"password\" className=\"block text-sm font-medium text-gray-700\">\n                    Password\n                  </label>\n                  <Link href=\"/forgot-password\" className=\"text-sm text-primary hover:text-primary-dark\">\n                    Forgot password?\n                  </Link>\n                </div>\n                <input\n                  type=\"password\"\n                  id=\"password\"\n                  name=\"password\"\n                  value={formData.password}\n                  onChange={handleChange}\n                  className={`w-full px-4 py-2 border rounded-lg focus:ring-2 focus:ring-primary focus:border-primary ${\n                    errors.password ? 'border-red-500' : 'border-gray-300'\n                  }`}\n                  placeholder=\"Enter your password\"\n                  disabled={isLoading}\n                />\n                {errors.password && <p className=\"text-red-500 text-sm mt-1\">{errors.password}</p>}\n              </div>\n\n              <div className=\"flex items-center\">\n                <input\n                  type=\"checkbox\"\n                  id=\"rememberMe\"\n                  name=\"rememberMe\"\n                  checked={formData.rememberMe}\n                  onChange={handleChange}\n                  className=\"h-4 w-4 text-primary border-gray-300 rounded focus:ring-primary\"\n                />\n                <label htmlFor=\"rememberMe\" className=\"ml-2 block text-sm text-gray-700\">\n                  Remember me\n                </label>\n              </div>\n\n              <button \n                type=\"submit\"\n                className={`w-full btn-primary text-center ${isLoading ? 'opacity-50 cursor-not-allowed' : ''}`}\n                disabled={isLoading}\n              >\n                {isLoading ? 'Signing in...' : 'Sign In'}\n              </button>\n            </form>\n\n            <div className=\"mt-6 pt-6 border-t border-gray-100\">\n              <p className=\"text-sm text-center text-gray-600\">\n                Don't have an account?{' '}\n                <Link href=\"/create-account\" className=\"text-primary hover:text-primary-dark\">\n                  Create an account\n                </Link>\n              </p>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n} "],"names":[],"mappings":"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","debugId":null}}]
}