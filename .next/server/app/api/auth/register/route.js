(()=>{var e={};e.id=612;e.ids=[612];e.modules={846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3986:(e,r,t)=>{"use strict";t.r(r);t.d(r,{patchFetch:()=>v,routeModule:()=>l,serverHooks:()=>y,workAsyncStorage:()=>m,workUnitAsyncStorage:()=>x});var s={};t.r(s);t.d(s,{POST:()=>p});var a=t(6559);var n=t(8088);var o=t(7719);var i=t(2190);var u=t(5663);var c=t(6034);async function p(e){try{if(!e.body){return i.NextResponse.json({error:"No request body provided"},{status:400})}const r=await e.json();const{company:t,email:s,password:a,phone:n,truckCount:o,role:p="owner"}=r;if(!t||!s||!a||!n||!o){return i.NextResponse.json({error:"All fields are required"},{status:400})}const d=await c.K.findOne({email:s});if(d){return i.NextResponse.json({error:"User with this email already exists"},{status:400})}const l=await u.Ay.hash(a,10);const m=await c.K.create({company:t,email:s,password:l,phone:n,truckCount:parseInt(o),isPremium:parseInt(o)>5,role:p});return i.NextResponse.json({message:"User created successfully",user:{id:m._id,company:m.company,email:m.email,truckCount:m.truckCount,isPremium:m.isPremium}},{status:201})}catch(e){console.error("Registration error:",e);return i.NextResponse.json({error:"Internal server error"},{status:500})}};const d="";const l=new a.AppRouteRouteModule({definition:{kind:n.RouteKind.APP_ROUTE,page:"/api/auth/register/route",pathname:"/api/auth/register",filename:"route",bundlePath:"app/api/auth/register/route"},resolvedPagePath:"/Users/anantmishra/Documents/GitHub/Vayo/app/api/auth/register/route.ts",nextConfigOutput:d,userland:s});const{workAsyncStorage:m,workUnitAsyncStorage:x,serverHooks:y}=l;function v(){return(0,o.patchFetch)({workAsyncStorage:m,workUnitAsyncStorage:x})}},4870:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-route.runtime.prod.js")},5511:e=>{"use strict";e.exports=require("crypto")},6034:(e,r,t)=>{"use strict";t.d(r,{K:()=>a});const s=[{_id:"1",company:"Demo Company",email:"user@example.com",password:"$2a$10$JTaZ.qZPkwzEtfa9mIv/X.F.jvU25MPZM9VsZB2ylM67Wz64Wghui",phone:"123-456-7890",truckCount:10,isPremium:true,createdAt:new Date,role:"owner"}];const a={findOne:async e=>{return s.find(r=>e.email&&r.email.toLowerCase()===e.email.toLowerCase())||null},findById:async e=>{return s.find(r=>r._id===e)||null},create:async e=>{const r=(s.length+1).toString();const t={_id:r,...e,createdAt:new Date};s.push(t);return t}}},6487:()=>{},8335:()=>{},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")}};var r=require("../../../../webpack-runtime.js");r.C(e);var t=e=>r(r.s=e);var s=r.X(0,[447,580,663],()=>t(3986));module.exports=s})();